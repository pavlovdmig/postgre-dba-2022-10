## **Домашнее задание №9:**
**Репликация**
1.  Создадим в облаке 3 кластера с ubuntu в YC
    
    ![1](https://user-images.githubusercontent.com/97864676/213858933-2f1faa80-1d2a-4f53-8605-03134a24e93c.png)

2.  Подключимся к созданным кластерам.
    
    ![2](https://user-images.githubusercontent.com/97864676/213858948-9b9c29e9-6194-4ccf-bc67-78620f1e866e.png)

3.  Установим на созданных магшинах PostgreSQL 14.

4.  Не знаю почему, но если одновременно работать на трех машинах, лезут непонятные ошибки в убунту, плюс все очень медленно начинает работать((
    
5.  Принял решение работать на одной ВМ но на разных инстансах.
6.  Создал инстансы main,main2,main3:

    ![3](https://user-images.githubusercontent.com/97864676/213858959-4aad7228-dc1e-479a-b6fe-d197e612669b.png)

7.  Подключился к инстансу main по порту 5432, установил логический уровень репликации и затем рестартанул инстанс

    ![4](https://user-images.githubusercontent.com/97864676/213858968-bfb705bd-faa9-437b-96d4-00c3de793ed8.png)

8.  На инстансе main создаем базу данных main и в ней две таблицы test и test2

    ![5](https://user-images.githubusercontent.com/97864676/213858975-30c94cfb-0bec-4182-b22d-0c02979728f3.png)

9. На истенсе main2 проделываем все тоже самое, что в пунктах 7 и 8
    
    ![6](https://user-images.githubusercontent.com/97864676/213858982-50e29442-4290-44e3-92a0-f35071fba284.png)

10. Создаем публикацию таблицы test и подписываемся на публикацию таблицы test2 с ВМ №2.
    Создаем публикацию таблицы test2 и подписываемся на публикацию таблицы test1 с ВМ №1.
11. Создание публикаций:
    
    ![7](https://user-images.githubusercontent.com/97864676/213858998-5b837230-3564-49d9-848c-df82e092974a.png)

12. Создание подписок.
    
    
    ![8im](https://user-images.githubusercontent.com/97864676/213859004-f003155f-95cd-4da8-aafc-b9a54984eef4.png)
    ![9](https://user-images.githubusercontent.com/97864676/213859008-cdb25c65-3440-41b7-822f-623ef9a46512.png)

13. Делаем инсерты и проверяем:
    
    ![10](https://user-images.githubusercontent.com/97864676/213859010-744b4812-43e6-47bb-9564-c9d818f28fe4.png)

14. 3 ВМ использовать как реплику для чтения и бэкапов (подписаться на таблицы из ВМ №1 и №2 ). 
15. Выполняем предидущие шаги по созданию бд, таблиц и подписки но на инстансе main3
16. Проверяем, что данные в таблицах на main3 появились.
    
    ![101](https://user-images.githubusercontent.com/97864676/213859019-d10665b1-f8b8-490c-839f-d9615b8e7faa.png)




