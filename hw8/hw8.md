## **Домашнее задание №8:**
**Нагрузочное тестирование и тюнинг PostgreSQL**
1.  Развернул VM в YC со следующими характеристиками
    im1
2.  Поставил на неё PostgreSQL 14.
    
    im2
3.  Запустим pgbench с дефолтными настройками:
    ```
    sudo -u postgres pgbench -c 50 -j 2 -P 10 -T 60 postgres
    ```
4. Смотрим на результаты:
    
    im3
5. Пробуем подкрутить следующие настройки(так как у нас есть настройка с контекстом postmaster нам необходимо рестартовать наш сервер)
    -   shared_buffers TO '512MB' так как памяти у нас 2GB, а в рекомендациях устанавливаь в 25% от общей оперативной памяти на сервере;
    -   work_mem увеличил в два раза;
    -   effective_cache_size установил в 75% от общей оперативной памяти на сервере;
    
    4.im
6. Получаем следующие результаты:
    
    5im
7. Прирост получился не плохой, в районе 45 tps
8. Воспользуемся pgtune, в рекомендациях у нас :
    
    6im
9. ПРименим настройки, рестартанем постгрес, и запустим наш pgbench(применял настройки с генереннымм скриптом через alter sustem)
    
    7im
10. Ну и чудеса, результат хуже чем с дефолтом и с тюнингом, 299 tps...
11. Попробуем перезапустить инстанс в клауде.
12. Получаем результат:

    8im

13. Стало лучше.  373 tps
